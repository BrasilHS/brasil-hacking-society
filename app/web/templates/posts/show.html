{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-10">
  <!-- Post Card -->
  <article class="w-full bg-zinc-950 shadow-lg border-b border-zinc-800">
    <!-- Header -->
    <div class="py-2">
        <!-- Title -->
        <h1 class="text-2xl md:text-3xl font-semibold text-emerald-400 leading-snug">
            {{ post.title }}
        </h1>
    </div>

    <!-- Content -->
    <div class="py-2">
      <div class="prose prose-invert max-w-none text-zinc-300">
        {{ post.content }}
      </div>
    </div>

    {% with 
        votes = post.votes, 
        qnt_replies = post.comments | length,
        username = post.author.username,
        created_at = post.created_at,
        author_id = post.author.id
    %}
        {% include 'components/post_footer.html' %}
    {% endwith %}
  </article>

  <!-- Comments Section -->
  <section class="mt-10">
    {% for comment in post.comments %}
        <div class="w-full  border-b border-zinc-800 mb-4">
            <div class="py-2">
                <div class="prose prose-invert max-w-none text-zinc-300">
                    {{ comment.content }}
                </div>
            </div>
            {% with 
                votes = comment.votes, 
                qnt_replies = comment.comments | length,
                username = comment.author.username,
                created_at = comment.created_at,
                author_id = comment.author.id
            %}
                {% include 'components/post_footer.html' %}
            {% endwith %}
        </div>
    {% else %}
      <p class="text-zinc-500 text-sm">
        No comments yet.
      </p>
    {% endfor %}    
  </section>

</div>
{% endblock %}